<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Details - Library System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* === CSS VARIABLES === */
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #27ae60;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gray: #95a5a6;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --radius: 8px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* === HEADER STYLES === */
        .header {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .breadcrumb a {
            color: var(--secondary);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--secondary);
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-danger {
            background: var(--accent);
            color: white;
        }

        .btn-secondary {
            background: var(--gray);
            color: white;
        }

        .btn-sm {
            padding: 8px 15px;
            font-size: 0.9rem;
        }

        /* === BOOK DETAILS LAYOUT === */
        .book-details {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        /* === BOOK COVER SECTION === */
        .book-cover-section {
            text-align: center;
        }

        .book-cover {
            width: 100%;
            max-width: 280px;
            height: 400px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .book-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .availability-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .available {
            background: var(--success);
            color: white;
        }

        .unavailable {
            background: var(--accent);
            color: white;
        }

        .limited {
            background: var(--warning);
            color: white;
        }

        .copies-info {
            background: white;
            padding: 15px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .copy-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .action-buttons .btn {
            width: 100%;
            justify-content: center;
        }

        /* === BOOK INFO SECTION === */
        .book-info-section {
            background: white;
            padding: 30px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .book-title {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
            line-height: 1.2;
        }

        .book-authors {
            font-size: 1.2rem;
            color: var(--secondary);
            margin-bottom: 20px;
        }

        .book-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .meta-item {
            display: flex;
            flex-direction: column;
        }

        .meta-label {
            font-size: 0.8rem;
            color: var(--gray);
            margin-bottom: 5px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .meta-value {
            font-weight: 600;
            color: var(--dark);
        }

        .book-description {
            margin-bottom: 30px;
        }

        .description-text {
            line-height: 1.8;
            color: #555;
        }

        /* === RATINGS AND REVIEWS === */
        .ratings-section {
            margin-bottom: 30px;
        }

        .rating-overview {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .average-rating {
            text-align: center;
        }

        .rating-number {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary);
        }

        .rating-stars {
            color: #f39c12;
            font-size: 1.2rem;
            margin: 5px 0;
        }

        .rating-count {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .rating-bars {
            flex: 1;
        }

        .rating-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .bar-label {
            width: 30px;
            font-size: 0.9rem;
        }

        .bar-container {
            flex: 1;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            background: #f39c12;
        }

        /* === TABS SECTION === */
        .tabs-container {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .tabs-header {
            display: flex;
            background: var(--light);
            border-bottom: 1px solid #ddd;
        }

        .tab {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray);
            transition: var(--transition);
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: var(--secondary);
            border-bottom-color: var(--secondary);
            background: white;
        }

        .tab-content {
            padding: 30px;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        /* === BORROWING HISTORY TABLE === */
        .history-table {
            width: 100%;
            border-collapse: collapse;
        }

        .history-table th,
        .history-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .history-table th {
            background: var(--light);
            font-weight: 600;
            color: var(--primary);
        }

        .history-table tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .returned {
            background: #d4edda;
            color: #155724;
        }

        .active {
            background: #d1ecf1;
            color: #0c5460;
        }

        .overdue {
            background: #f8d7da;
            color: #721c24;
        }

        /* === SIMILAR BOOKS === */
        .similar-books {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .similar-book {
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .similar-book:hover {
            transform: translateY(-5px);
        }

        .similar-cover {
            width: 100px;
            height: 150px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: var(--radius);
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        .similar-title {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .similar-author {
            font-size: 0.8rem;
            color: var(--gray);
        }

        /* === ADMIN ACTIONS === */
        .admin-actions {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: var(--radius);
            padding: 20px;
            margin-top: 30px;
        }

        .admin-actions h3 {
            color: #856404;
            margin-bottom: 15px;
        }

        .admin-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* === RESPONSIVE STYLES === */
        @media (max-width: 768px) {
            .book-details {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .book-cover-section {
                text-align: center;
            }
            
            .book-cover {
                margin: 0 auto 20px;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .header-actions {
                justify-content: center;
            }
            
            .book-meta {
                grid-template-columns: 1fr;
            }
            
            .rating-overview {
                flex-direction: column;
                text-align: center;
            }
            
            .tabs-header {
                flex-wrap: wrap;
            }
            
            .tab {
                flex: 1;
                min-width: 120px;
                text-align: center;
            }
        }

        /* === UTILITY CLASSES === */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .text-success {
            color: var(--success);
        }

        .text-warning {
            color: var(--warning);
        }

        .text-danger {
            color: var(--accent);
        }

        .section-title {
            font-size: 1.3rem;
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header with Breadcrumb -->
        <div class="header">
            <div class="breadcrumb">
                <a href="#"><i class="fas fa-home"></i> Home</a>
                <i class="fas fa-chevron-right"></i>
                <a href="#">Books</a>
                <i class="fas fa-chevron-right"></i>
                <span>1984 - George Orwell</span>
            </div>
            <div class="header-actions">
                <button class="btn btn-secondary btn-sm" onclick="window.history.back()">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <button class="btn btn-warning btn-sm" onclick="printPage()">
                    <i class="fas fa-print"></i> Print
                </button>
            </div>
        </div>

        <!-- Book Details Main Content -->
        <div class="book-details">
            <!-- Left Column - Book Cover & Actions -->
            <div class="book-cover-section">
                <div class="book-cover" id="bookCover">
                    <i class="fas fa-book"></i>
                </div>
                
                <div class="availability-badge available" id="availabilityBadge">
                    Available
                </div>

                <div class="copies-info">
                    <div class="copy-stats">
                        <div>
                            <div class="stat-number" id="availableCopies">3</div>
                            <div class="stat-label">Available</div>
                        </div>
                        <div>
                            <div class="stat-number" id="totalCopies">5</div>
                            <div class="stat-label">Total Copies</div>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" id="borrowBtn" onclick="borrowBook()">
                        <i class="fas fa-shopping-cart"></i> Borrow Book
                    </button>
                    <button class="btn btn-warning" id="reserveBtn" onclick="reserveBook()">
                        <i class="fas fa-bookmark"></i> Reserve Book
                    </button>
                    <button class="btn btn-secondary" onclick="addToWishlist()">
                        <i class="fas fa-heart"></i> Add to Wishlist
                    </button>
                </div>

                <!-- Quick Info Card -->
                <div class="copies-info mt-20">
                    <h4 style="margin-bottom: 15px; color: var(--primary);">Quick Info</h4>
                    <div style="display: grid; gap: 10px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--gray);">ISBN:</span>
                            <span style="font-weight: 600;" id="quickIsbn">9780451524935</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--gray);">Language:</span>
                            <span style="font-weight: 600;" id="quickLanguage">English</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--gray);">Pages:</span>
                            <span style="font-weight: 600;" id="quickPages">328</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Book Information -->
            <div class="book-info-section">
                <h1 class="book-title" id="bookTitle">1984</h1>
                <div class="book-authors" id="bookAuthors">by George Orwell</div>

                <!-- Book Metadata -->
                <div class="book-meta">
                    <div class="meta-item">
                        <span class="meta-label">Genre</span>
                        <span class="meta-value" id="metaGenre">Fiction, Dystopian</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Publisher</span>
                        <span class="meta-value" id="metaPublisher">Penguin Random House</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Published</span>
                        <span class="meta-value" id="metaPublished">1949</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Edition</span>
                        <span class="meta-value" id="metaEdition">First Edition</span>
                    </div>
                </div>

                <!-- Book Description -->
                <div class="book-description">
                    <h3 class="section-title">Description</h3>
                    <div class="description-text" id="bookDescription">
                        1984 is a dystopian social science fiction novel and cautionary tale written by English writer George Orwell. It was published on 8 June 1949 by Secker & Warburg as Orwell's ninth and final book completed in his lifetime. Thematically, it centres on the consequences of totalitarianism, mass surveillance and repressive regimentation of people and behaviours within society.
                    </div>
                </div>

                <!-- Ratings Section -->
                <div class="ratings-section">
                    <h3 class="section-title">Ratings & Reviews</h3>
                    <div class="rating-overview">
                        <div class="average-rating">
                            <div class="rating-number">4.5</div>
                            <div class="rating-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <div class="rating-count">128 reviews</div>
                        </div>
                        <div class="rating-bars">
                            <div class="rating-bar">
                                <span class="bar-label">5★</span>
                                <div class="bar-container">
                                    <div class="bar-fill" style="width: 65%;"></div>
                                </div>
                                <span>65%</span>
                            </div>
                            <div class="rating-bar">
                                <span class="bar-label">4★</span>
                                <div class="bar-container">
                                    <div class="bar-fill" style="width: 20%;"></div>
                                </div>
                                <span>20%</span>
                            </div>
                            <div class="rating-bar">
                                <span class="bar-label">3★</span>
                                <div class="bar-container">
                                    <div class="bar-fill" style="width: 10%;"></div>
                                </div>
                                <span>10%</span>
                            </div>
                            <div class="rating-bar">
                                <span class="bar-label">2★</span>
                                <div class="bar-container">
                                    <div class="bar-fill" style="width: 3%;"></div>
                                </div>
                                <span>3%</span>
                            </div>
                            <div class="rating-bar">
                                <span class="bar-label">1★</span>
                                <div class="bar-container">
                                    <div class="bar-fill" style="width: 2%;"></div>
                                </div>
                                <span>2%</span>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-secondary btn-sm" onclick="showTab('reviews')">
                        <i class="fas fa-comment"></i> Write a Review
                    </button>
                </div>
            </div>
        </div>

        <!-- Tabs Section -->
        <div class="tabs-container">
            <div class="tabs-header">
                <button class="tab active" onclick="showTab('details')">Details</button>
                <button class="tab" onclick="showTab('reviews')">Reviews</button>
                <button class="tab" onclick="showTab('history')">Borrowing History</button>
                <button class="tab" onclick="showTab('similar')">Similar Books</button>
            </div>

            <div class="tab-content">
                <!-- Details Tab -->
                <div class="tab-pane active" id="details-tab">
                    <h3 class="section-title">Detailed Information</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <div>
                            <h4 style="margin-bottom: 15px; color: var(--primary);">Physical Details</h4>
                            <div style="display: grid; gap: 10px;">
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="color: var(--gray);">Format:</span>
                                    <span>Paperback</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="color: var(--gray);">Dimensions:</span>
                                    <span>5.5" x 8.5"</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="color: var(--gray);">Weight:</span>
                                    <span>450g</span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4 style="margin-bottom: 15px; color: var(--primary);">Catalog Information</h4>
                            <div style="display: grid; gap: 10px;">
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="color: var(--gray);">Date Added:</span>
                                    <span>January 15, 2023</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="color: var(--gray);">Last Borrowed:</span>
                                    <span>March 10, 2024</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="color: var(--gray);">Total Borrows:</span>
                                    <span>47 times</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reviews Tab -->
                <div class="tab-pane" id="reviews-tab">
                    <h3 class="section-title">Reader Reviews</h3>
                    <div style="margin-bottom: 20px;">
                        <button class="btn btn-primary" onclick="openReviewModal()">
                            <i class="fas fa-edit"></i> Write a Review
                        </button>
                    </div>
                    
                    <!-- Sample Reviews -->
                    <div style="display: grid; gap: 20px;">
                        <div style="padding: 20px; background: #f8f9fa; border-radius: var(--radius);">
                            <div style="display: flex; justify-content: between; margin-bottom: 10px;">
                                <strong>John D.</strong>
                                <div class="rating-stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                            <p>"A timeless classic that becomes more relevant with each passing year. Orwell's vision of totalitarianism is both terrifying and thought-provoking."</p>
                            <div style="color: var(--gray); font-size: 0.9rem; margin-top: 10px;">Reviewed on March 1, 2024</div>
                        </div>
                        
                        <div style="padding: 20px; background: #f8f9fa; border-radius: var(--radius);">
                            <div style="display: flex; justify-content: between; margin-bottom: 10px;">
                                <strong>Sarah M.</strong>
                                <div class="rating-stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="far fa-star"></i>
                                </div>
                            </div>
                            <p>"While the themes are important, I found the pacing to be slow at times. Still, a must-read for anyone interested in political literature."</p>
                            <div style="color: var(--gray); font-size: 0.9rem; margin-top: 10px;">Reviewed on February 15, 2024</div>
                        </div>
                    </div>
                </div>

                <!-- Borrowing History Tab -->
                <div class="tab-pane" id="history-tab">
                    <h3 class="section-title">Borrowing History</h3>
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>Borrower</th>
                                <th>Borrow Date</th>
                                <th>Due Date</th>
                                <th>Return Date</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Mike Davis</td>
                                <td>2024-03-01</td>
                                <td>2024-04-01</td>
                                <td>-</td>
                                <td><span class="status-badge active">Active</span></td>
                            </tr>
                            <tr>
                                <td>Emily Wilson</td>
                                <td>2024-02-15</td>
                                <td>2024-03-15</td>
                                <td>2024-03-10</td>
                                <td><span class="status-badge returned">Returned</span></td>
                            </tr>
                            <tr>
                                <td>David Miller</td>
                                <td>2024-01-20</td>
                                <td>2024-02-20</td>
                                <td>2024-02-18</td>
                                <td><span class="status-badge returned">Returned</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Similar Books Tab -->
                <div class="tab-pane" id="similar-tab">
                    <h3 class="section-title">Similar Books You Might Like</h3>
                    <div class="similar-books">
                        <div class="similar-book" onclick="viewBook('brave-new-world')">
                            <div class="similar-cover">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="similar-title">Brave New World</div>
                            <div class="similar-author">Aldous Huxley</div>
                        </div>
                        <div class="similar-book" onclick="viewBook('animal-farm')">
                            <div class="similar-cover">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="similar-title">Animal Farm</div>
                            <div class="similar-author">George Orwell</div>
                        </div>
                        <div class="similar-book" onclick="viewBook('fahrenheit-451')">
                            <div class="similar-cover">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="similar-title">Fahrenheit 451</div>
                            <div class="similar-author">Ray Bradbury</div>
                        </div>
                        <div class="similar-book" onclick="viewBook('the-handmaids-tale')">
                            <div class="similar-cover">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="similar-title">The Handmaid's Tale</div>
                            <div class="similar-author">Margaret Atwood</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Actions Section (Visible to Librarians/Admins) -->
        <div class="admin-actions" id="adminSection">
            <h3><i class="fas fa-shield-alt"></i> Administrative Actions</h3>
            <div class="admin-buttons">
                <button class="btn btn-warning btn-sm" onclick="editBook()">
                    <i class="fas fa-edit"></i> Edit Book Details
                </button>
                <button class="btn btn-danger btn-sm" onclick="deleteBook()">
                    <i class="fas fa-trash"></i> Delete Book
                </button>
                <button class="btn btn-secondary btn-sm" onclick="updateInventory()">
                    <i class="fas fa-boxes"></i> Update Inventory
                </button>
                <button class="btn btn-primary btn-sm" onclick="generateReport()">
                    <i class="fas fa-chart-bar"></i> Usage Report
                </button>
            </div>
        </div>
    </div>

    <script>
        // Current book data
        const currentBook = {
            id: 1,
            title: '1984',
            authors: ['George Orwell'],
            isbn: '9780451524935',
            genre: 'Fiction, Dystopian',
            publisher: 'Penguin Random House',
            publication_year: '1949',
            edition: 'First Edition',
            total_copies: 5,
            available_copies: 3,
            language: 'English',
            page_count: '328',
            description: '1984 is a dystopian social science fiction novel and cautionary tale written by English writer George Orwell. It was published on 8 June 1949 by Secker & Warburg as Orwell\'s ninth and final book completed in his lifetime. Thematically, it centres on the consequences of totalitarianism, mass surveillance and repressive regimentation of people and behaviours within society.',
            cover_image: null,
            rating: 4.5,
            review_count: 128
        };

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadBookData();
            updateAvailability();
            checkUserRole();
        });

        // Load book data into UI
        function loadBookData() {
            document.getElementById('bookTitle').textContent = currentBook.title;
            document.getElementById('bookAuthors').textContent = 'by ' + currentBook.authors.join(', ');
            document.getElementById('bookDescription').textContent = currentBook.description;
            
            document.getElementById('metaGenre').textContent = currentBook.genre;
            document.getElementById('metaPublisher').textContent = currentBook.publisher;
            document.getElementById('metaPublished').textContent = currentBook.publication_year;
            document.getElementById('metaEdition').textContent = currentBook.edition;
            
            document.getElementById('availableCopies').textContent = currentBook.available_copies;
            document.getElementById('totalCopies').textContent = currentBook.total_copies;
            
            document.getElementById('quickIsbn').textContent = currentBook.isbn;
            document.getElementById('quickLanguage').textContent = currentBook.language;
            document.getElementById('quickPages').textContent = currentBook.page_count;

            // Set cover image if available
            if (currentBook.cover_image) {
                document.getElementById('bookCover').innerHTML = `<img src="${currentBook.cover_image}" alt="${currentBook.title}">`;
            }
        }

        // Update availability status and buttons
        function updateAvailability() {
            const availableCopies = currentBook.available_copies;
            const badge = document.getElementById('availabilityBadge');
            const borrowBtn = document.getElementById('borrowBtn');
            const reserveBtn = document.getElementById('reserveBtn');

            if (availableCopies > 3) {
                badge.className = 'availability-badge available';
                badge.textContent = 'Available';
                borrowBtn.disabled = false;
                reserveBtn.disabled = true;
            } else if (availableCopies > 0) {
                badge.className = 'availability-badge limited';
                badge.textContent = 'Limited Copies';
                borrowBtn.disabled = false;
                reserveBtn.disabled = true;
            } else {
                badge.className = 'availability-badge unavailable';
                badge.textContent = 'Out of Stock';
                borrowBtn.disabled = true;
                reserveBtn.disabled = false;
            }
        }

        // Tab navigation
        function showTab(tabName) {
            // Update tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update content
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            document.getElementById(tabName + '-tab').classList.add('active');
        }

        // Book actions
        function borrowBook() {
            if (currentBook.available_copies > 0) {
                if (confirm(`Borrow "${currentBook.title}"?`)) {
                    alert('Book borrowed successfully! Due date: ' + getDueDate());
                    // In real app, make API call to backend
                }
            } else {
                alert('This book is currently unavailable.');
            }
        }

        function reserveBook() {
            if (confirm(`Reserve "${currentBook.title}"? You will be notified when it becomes available.`)) {
                alert('Book reserved successfully!');
                // In real app, make API call to backend
            }
        }

        function addToWishlist() {
            alert('Added to your wishlist!');
            // In real app, make API call to backend
        }

        // Admin functions
        function editBook() {
            window.location.href = `/books/edit/${currentBook.id}`;
        }

        function deleteBook() {
            if (confirm(`Are you sure you want to delete "${currentBook.title}"? This action cannot be undone.`)) {
                alert('Book deleted successfully!');
                // In real app, make API call to backend
                window.location.href = '/books';
            }
        }

        function updateInventory() {
            const newTotal = prompt('Enter new total copies:', currentBook.total_copies);
            const newAvailable = prompt('Enter new available copies:', currentBook.available_copies);
            
            if (newTotal && newAvailable) {
                currentBook.total_copies = parseInt(newTotal);
                currentBook.available_copies = parseInt(newAvailable);
                loadBookData();
                updateAvailability();
                alert('Inventory updated successfully!');
            }
        }

        function generateReport() {
            alert('Generating usage report...');
            // In real app, generate and download report
        }

        // Utility functions
        function getDueDate() {
            const dueDate = new Date();
            dueDate.setDate(dueDate.getDate() + 30); // 30 days from now
            return dueDate.toLocaleDateString();
        }

        function checkUserRole() {
            // In real app, check user role from session/token
            const isAdmin = true; // Change based on actual user role
            if (!isAdmin) {
                document.getElementById('adminSection').style.display = 'none';
            }
        }

        function viewBook(bookId) {
            alert(`Loading book: ${bookId}`);
            // In real app, navigate to book details page
        }

        function printPage() {
            window.print();
        }

        function openReviewModal() {
            alert('Review modal would open here');
            // In real app, open a review form modal
        }
    </script>
</body>
</html>